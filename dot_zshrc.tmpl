# - General settings -
export PATH="$PATH:/snap/bin:$HOME/.local/bin"

# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# ZSH Theme
ZSH_THEME="{{ .zsh.theme }}"

# Uncomment the following line to use case-sensitive completion.
CASE_SENSITIVE="true"

# Uncomment the following line to enable command auto-correction.
DISABLE_CORRECTION="true"

# Disable window autotitle
DISABLE_AUTO_TITLE="true"

# Disable auto-updates (managed by chezmoi)
DISABLE_AUTO_UPDATE=true

# Enable Docker option-stacking completion
zstyle ':completion:*:*:docker:*' option-stacking yes
zstyle ':completion:*:*:docker-*:*' option-stacking yes

# Which plugins would you like to load?
# Standard plugins can be found in $ZSH/plugins/
# Custom plugins may be added to $ZSH_CUSTOM/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(
{{- range .zsh.plugins }}
  {{ . }}
{{- end }}
)

source $ZSH/oh-my-zsh.sh

# - User configuration -

# General
export EDITOR="nvim"

# Aliases
alias vim="nvim"
alias sysupdate="sudo apt update && sudo apt dist-upgrade -y && sudo snap refresh"
alias inc="incus"
alias zj="zellij"
alias bwlogin='export BW_SESSION="$(bw login --raw)"'
alias bwunlock='export BW_SESSION="$(bw unlock --raw)"'

# Containerized apps
CONTAINER_APP_EXEC="docker run -ti --rm --user $(id -u):$(id -g) --net=host --read-only -v /mnt/c:/mnt/c -v $PWD:$PWD -w $PWD"
alias distrobuilder="docker run -ti --rm --net=host --privileged --read-only -v $PWD:/build --tmpfs /var/cache:rw,exec,dev --name app-distrobuilder-$(uuidgen -r) ghcr.io/f-bn/distrobuilder:edge"

# SSH Agent
if [ -z "$SSH_AUTH_SOCK" ] ; then
  eval "$(ssh-agent -s)" >/dev/null
  ssh-add $HOME/.ssh/id_ed25519 >/dev/null
fi
